<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
			xmlns:th="http://www.thymeleaf.org"
			th:replace="~{fragments/dashlayout :: dashlayout (~{::body},'list')}">
<!--			th:replace="~{fragments/dashlayout :: dashlayout (~{::body},'list')}">-->
<!--					th:replace="~{fragments/layout :: layout (~{::body},'list')}">-->
<head>
	<link rel="stylesheet" type="text/css" th:href="@{/css/layout.css}"/>
	<link rel="stylesheet" type="text/css" th:href="@{/css/grid.css}"/>
	<link rel="stylesheet" type="text/css" th:href="@{/css/component.css}"/>
</head>
<body style="height: 100%">
<div class="abs" style="height: 100%">
	<div style="height: 100%">
		<div class="showcase card-nosh" style="height: 100%">
			<div class="showcase-title card card-colored-0" style="padding: 16px">
				<h2 th:text="${title}"></h2>
			</div>

			<div class="showcase-title card card-colored-0">

				<div class="showcase-title procard-row ltoolbar">

					<button id="page_prev" class="ltoolbar-elem ltoolbar-tbutton"
									th:onclick="'paginate(this, ' + ${type} + ' , ' + ${pageMax} + ')'"> <
					</button>

					<div class="ltoolbar" style="background: rgba(52, 152, 219,1.0)">
						<div id="pagen" class="ltoolbar-elem ltoolbar-label-txt" th:text="${#request.getParameter('page')}"> <
						</div>
						<div class="ltoolbar-elem ltoolbar-label-txt"> :
						</div>
						<div id="pagem" class="ltoolbar-elem ltoolbar-label-txt" th:text="${pageMax}"> <
						</div>
					</div>

					<button id="page_next" class="ltoolbar-elem ltoolbar-tbutton"
									th:onclick="'paginate(this, ' + ${type} + ' , ' + ${pageMax} + ')'"> >
					</button>

				</div>
			</div>

			<div class="showcase-container progrid", style="height: 100%">
				<div th:each="user : ${list}">
					<div class="card procard">
						<div class="procard-img-cont">
<!--							<img src="/images/default/cvpic.png" class="proimg">-->
							<img class="proimg" th:if="${user.photos.size() != 0}"
									 th:src="${user.photos[user.photos.size() - 1].path}">
							<img class="proimg" th:unless="${user.photos.size() != 0}"
									 th:src="@{images/default/cvpic.png}">
						</div>
						<div class="card-colored-4 procard-row procard-bar">
						</div>

						<div class="procard-row">
							<p class="procard-title" th:text="${user.username}">
<!--								Abdelfettah Besbes-->
							</p>
						</div>
						<div class="procard-row">
							<p class="procard-sub-title" th:text="${user.email}">
<!--								Student at UnitFactory-->
							</p>
						</div>

						<div class="procard-row">
							<div class="procard-label">
								<p class="procard-label-txt-l procard-label-txt"> Score </p>
								<p class="procard-label-txt-r procard-label-txt" th:text="${#numbers.formatDecimal(user.score, 0, 'COMMA', 2, 'POINT')}">
								</p>
							</div>
						</div>

						<div class="procard-row">
							<div class=" procard-label">
								<p class="procard-label-txt-l procard-label-txt"> Invited </p>
								<p class="procard-label-txt-r procard-label-txt" th:text="${user.invitees}">
								</p>
							</div>
						</div>

						<div class="procard-row">
							<div class="procard-label">
								<p class="procard-label-txt-l procard-label-txt"> Direct </p>
								<p class="procard-label-txt-r procard-label-txt" th:text="${user.direct}">
								</p>
							</div>
						</div>

						<div class="procard-row">
							<div class="procard-label">
								<p class="procard-label-txt-l procard-label-txt"> Photos </p>
								<p class="procard-label-txt-r procard-label-txt" th:text="${user.photos.size()}">
								</p>
							</div>
						</div>

						<div class="procard-row">
							<div class="card procard-button">
								<p class="procard-label-txt-l procard-label-txt" onclick="viewmore()">View More ..</p>
<!--								<i class="far fa-eye" style="color: #222222; margin: 16px"></i>-->
							</div>
						</div>

						<div class="card-colored-5 procard-row procard-bar" style="margin-top: 16px">
						</div>
					</div>

				</div>
			</div>

			<script>
				function paginate(paction, type , pageMax)
				{
				    // alert('act: ' + paction + 'max: ' + parseInt(pageMax))
						var pagen = parseInt(document.getElementById('pagen').innerText);
						pagen += 1 - 2 * (paction.id == "page_prev");
						if (pagen > 0 & pagen <= pageMax)
						{
						    const url = '/list?type='+ type + '&page=' + pagen;
						    location.replace(url);
						}
				}
				function viewmore() {
						alert("Not implemented yet !");
        }
			</script>
		</div>
	</div>

</div>
</body>
</html>